<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>The Lovász Local Lemma | Sanjana Das</title> <meta name="author" content="Sanjana Das"> <meta name="description" content="A proof of the Lovász local lemma, which states that if we have a collection of bad events with only a few 'local' dependencies, then we avoid all of them with positive probability."> <meta name="keywords" content="math, mit, notes, combinatorics"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://sanjanad1024.github.io/blog/2024/lovasz-local-lemma/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?6185d15ea1982787ad7f435576553d64"></script> <link rel="stylesheet" href="/assets/css/math.css?288fe1e70b89d31b8131322fdc48a93a"> <link rel="stylesheet" href="/assets/css/showhide.css?2ae93211fac637d8b63a8ea647d9337d"> <link rel="stylesheet" href="/assets/css/notes.css?931adbc419343c0b3205989a55f982d7"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span>Sanjana </span>Das</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/notes/">Notes</a> </li> <li class="nav-item "> <a class="nav-link" href="/papers/">Papers</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">The Lovász Local Lemma</h1> <p class="post-meta">August 6, 2024</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/category/combinatorics"> <i class="fa-solid fa-tag fa-sm"></i> combinatorics</a>   <a href="/blog/category/probabilistic-method"> <i class="fa-solid fa-tag fa-sm"></i> probabilistic-method</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>In this post, I’ll explain the statement and proof of the Lovász local lemma.</p> <h1 id="motivation">Motivation</h1> <p>There are many situations where we have a random process and a collection of ‘bad’ events $A_1$, $\ldots$, $A_n$, and we want to show that there’s a positive probability that none of these bad events happen — i.e., that</p> <div> \[\mathbb{P}[\overline{A_1} \wedge \cdots \wedge \overline{A_n}] &gt; 0.\] </div> <p>This especially happens when we’re using the probabilistic method — often we’re trying to prove the existence of an object with certain properties by taking a <em>random</em> construction and showing that it works with positive probability, and in many cases, the construction working corresponds to avoiding a collection of bad events.</p> <p>There’s two extreme cases where it’s easy to show that we avoid all the bad events with positive probability. One is when there’s not too many events and their probabilities are all small (relative to the number of events). In this case, we can simply use a union bound — we have</p> <div> \[\mathbb{P}[A_1 \vee \cdots \vee A_n] \leq \mathbb{P}[A_1] + \cdots + \mathbb{P}[A_n],\] </div> <p>so if $\mathbb{P}[A_1] + \cdots + \mathbb{P}[A_n] &lt; 1$, then we get that</p> <div> \[\mathbb{P}[\overline{A_1} \wedge \cdots \wedge \overline{A_n}] = 1 - \mathbb{P}[A_1 \vee \cdots \vee A_n] &gt; 0.\] </div> <p>In particular, if we know that $\mathbb{P}[A_i] \leq p$ for all $i$ and $pn &lt; 1$, then this means we avoid all the bad events with positive probability.</p> <p>The other extreme case is when the events are all <em>independent</em>. In this case, it doesn’t matter how many events there are or how large their probabilities are (as long as they aren’t $1$, of course) — we simply have</p> <div> \[\mathbb{P}[\overline{A_1} \wedge \cdots \wedge \overline{A_n}] = \prod_{i = 1}^n (1 - \mathbb{P}[A_i]) &gt; 0.\] </div> <p>The motivation for the Lovász local lemma is the question of whether we can ‘interpolate’ between these two extreme cases.</p> <div class="question"> What if we have lots of events, but each is only dependent on a few others (where the event probabilities are small relative to the number of <em>dependencies</em>, rather than <em>events</em>)? Can we still avoid all the events with positive probability? </div> <p>It turns out the answer is yes! And that’s exactly what the Lovász local lemma states.</p> <h1 id="the-lovász-local-lemma">The Lovász local lemma</h1> <p>To state the Lovász local lemma, we first need to formalize what it means for each event to only be dependent on a few others.</p> <div class="definition"> We say an event $A$ is <span class="vocab">independent</span> from a collection of events $\{A_1, \ldots, A_n\}$ if conditioning on any logical combination of the events $A_1$, $\ldots$, $A_n$ doesn't affect the probability of $A$. </div> <p>For example, this means $\mathbb{P}[A \mid A_1 \wedge \overline{A_3} \wedge A_5] = \mathbb{P}[A]$.</p> <p>We’ll first state a ‘symmetric’ form of the Lovász local lemma (which is often what’s used in applications when our bad events have comparable probabilities).</p> <div class="theorem" text="Symmetric Lovász local lemma"> Let $A_1$, $\ldots$, $A_n$ be events such that $\mathbb{P}[A_i] \leq p$ for all $i$, and such that each event $A_i$ is independent from a collection of all but $d$ others. If $ep(d + 1) \leq 1$, then \[\mathbb{P}[\overline{A_1} \wedge \cdots \wedge \overline{A_n}] &gt; 0.\] </div> <p>(Here $e$ denotes the constant $e \approx 2.718$.)</p> <p>The important feature of this theorem is that the condition $ep(d + 1) \leq 1$ doesn’t reference the number of <em>events</em> at all — it only considers the number of <em>dependencies</em>.</p> <p>We’ll actually deduce the symmetric form of the Lovász local lemma from a more general ‘asymmetric’ form (which is useful even when the bad events <em>don’t</em> have comparable probabilities).</p> <div class="theorem" text="Asymmetric Lovász local lemma"> Let $A_1$, $\ldots$, $A_n$ be a collection of events, and for each $i \in [n]$, let $\mathcal{D}_i \subseteq [n]$ be a set such that $A_i$ is independent from the collection of events $\{A_j \mid j \not\in \mathcal{D}_i\}$. <br><br> Suppose there exist $x_1, \ldots, x_n \in (0, 1)$ such that $\mathbb{P}[A_i] \leq x_i\prod_{j \in \mathcal{D}_i} (1 - x_j)$ for all $i \in [n]$. Then \[\mathbb{P}[\overline{A_1} \wedge \cdots \wedge \overline{A_n}] \geq \prod_{i = 1}^n (1 - x_i) &gt; 0.\] </div> <p>First, here’s why the asymmetric version of the Lovász local lemma implies the symmetric version — given $A_1$, $\ldots$, $A_n$ as in the symmetric version, we can set $x_i = 1/(d + 1)$ for each $i$. This satisfies the hypothesis of the asymmetric version — for each $i$, we have $\lvert \mathcal{D}_i \rvert \leq d$, so</p> <div> \[x_i\prod_{j \in \mathcal{D}_i}(1 - x_j) \geq \frac{1}{d + 1}\left(1 - \frac{1}{d + 1}\right)^d \geq \frac{1}{(d + 1)e},\] </div> <p>and the assumption that $ep(d + 1) \leq 1$ means that this is at least $p$ (which was an upper bound on $\mathbb{P}[A_i]$). So the asymmetric version tells us we avoid all the bad events with positive probability, as desired.</p> <p>In the rest of this post, we’ll prove this asymmetric version of the Lovász local lemma.</p> <h1 id="proof-of-the-asymmetric-version">Proof of the asymmetric version</h1> <p>We’re going to actually prove the following claim.</p> <div class="claim"> For all $\mathcal{S} \subseteq [n]$ and $i \not\in \mathcal{S}$, we have $\mathbb{P}[A_i \mid \bigwedge_{j \in \mathcal{S}} \overline{A_j}] \leq x_i$. </div> <p>Once we have this claim, we can deduce <span class="crossref">Theorem 4</span> by writing</p> <div class="eqn"> \[\mathbb{P}[\overline{A_1} \wedge \cdots \wedge \overline{A_n}] = \prod_{i = 1}^n \mathbb{P}[\overline{A_i} \mid \overline{A_1} \wedge \cdots \wedge \overline{A_{i - 1}}] \leq \prod_{i = 1}^n (1 - x_i).\] </div> <p>We’ll prove this claim by induction on $\lvert\mathcal{S}\rvert$. When $\mathcal{S}$ is empty, we have $\mathbb{P}[A_i] \leq x_i\prod_{j \in \mathcal{D}_i} (1 - x_j) \leq x_i$, so the claim is true. Now suppose that $\mathcal{S}$ is not empty, and that we’ve proven the claim for all smaller sets $\mathcal{S}’$.</p> <p>We’re trying to consider the probability of $A_i$ conditioned on a bunch of events, so we’ll start by splitting these events into two — we’ll separately consider the ones that are independent from $A_i$ and the ones that aren’t. So we split up the event that we’re trying to condition on as $B_{\text{ind}} \wedge B_{\text{dep}}$, where</p> <div> \[B_{\text{ind}} = \bigwedge_{j \in \mathcal{S} \setminus \mathcal{D}_i} \overline{A_j} \quad \text{and} \quad B_{\text{dep}} = \bigwedge_{j \in \mathcal{S} \cap \mathcal{D}_i} \overline{A_j}.\] </div> <p>First, since $A_i$ is independent of \(\{A_j \mid j \not\in \mathcal{D}_i\}\) and $B_{\text{ind}}$ is a logical combination of these events, we know that conditioning on $B_{\text{ind}}$ doesn’t affect the probability of $A_i$ — i.e., we have $\mathbb{P}[A_i \mid B_{\text{ind}}] = \mathbb{P}[A_i]$. But we <em>don’t</em> know anything about how conditioning on $B_{\text{dep}}$ affects $A_i$, so the best thing we can do is try to get rid of it — so we drop the conditioning on $B_{\text{dep}}$ using the fact that</p> <div class="eqn"> \[\mathbb{P}[A_i \mid B_{\text{ind}} \wedge B_{\text{dep}}] = \frac{\mathbb{P}[A_i \wedge B_{\text{dep}} \mid B_{\text{ind}}]}{\mathbb{P}[B_{\text{dep}}]} \leq \frac{\mathbb{P}[A_i \mid B_{\text{ind}}]}{\mathbb{P}[B_{\text{dep}}]}.\] </div> <p>(We can’t really do anything better with $B_{\text{dep}}$ because we know nothing about how the events $A_j$ that go into it interact with $A_i$.)</p> <p>Now in the numerator, we’re only conditioning on $B_{\text{ind}}$, and we know how to handle this conditioning — we simply have $\mathbb{P}[A_i \mid B_{\text{ind}}] = \mathbb{P}[A_i]$. So now it remains to get a <em>lower</em> bound on the denominator $\mathbb{P}[B_{\text{dep}}]$.</p> <p>But $B_{\text{dep}}$ is an event of the form \(\overline{A_{j_1}} \wedge \cdots \wedge \overline{A_{j_m}}\) (where $j_1$, $\ldots$, $j_m$ are the elements of $\mathcal{S} \cap \mathcal{D}_i$), so we can actually do this in the same way as in <span class="crossref">(1)</span> using the inductive hypothesis! We can write</p> <div class="eqn"> \[\mathbb{P}[B_{\text{dep}}] = \prod_{k = 1}^m \mathbb{P}[\overline{A_{j_k}} \mid \overline{A_{j_1}} \wedge \cdots \wedge \overline{A_{j_{k - 1}}}].\] </div> <p>And for each term on the right-hand side, the set of indices of the events we’re conditioning on is a proper subset of $\mathcal{S} \cap \mathcal{D}_i \subseteq \mathcal{S}$, which means in particular that we’ve already proven the claim for this set (in our induction). So for each $k$, we have</p> <div> \[\mathbb{P}[A_{j_k} \mid \overline{A_{j_1}} \wedge \cdots \wedge \overline{A_{j_{k - 1}}}] \leq x_{j_k},\] </div> <p>which means that the $k$th term on the right-hand side of <span class="crossref">(3)</span> is at least $1 - x_{j_k}$. This gives the lower bound</p> <div> \[\mathbb{P}[B_{\text{dep}}] \geq \prod_{k = 1}^m (1 - x_{j_k}) = \prod_{j \in \mathcal{S} \cap \mathcal{D}_i} (1 - x_j) \geq \prod_{j \in \mathcal{D}_i} (1 - x_j),\] </div> <p>Plugging this into <span class="crossref">(2)</span>, we get that</p> <div> \[\mathbb{P}[A_i \mid B_{\text{ind}} \wedge B_{\text{dep}}] \leq \frac{\mathbb{P}[A_i]}{\prod_{j \in \mathcal{D}_i} (1 - x_j)} \leq x_i\] </div> <p>(using the bound on $\mathbb{P}[A_i]$ from the given hypothesis), as desired.</p> <div class="remark"> I don't really know how you'd come up with this proof, but I would imagine that you start with the statement of <span class="crossref">Claim 5</span> rather than <span class="crossref">Theorem 4</span> — you want to find <em>some</em> condition on $\mathbb{P}[A_1]$, $\ldots$, $\mathbb{P}[A_n]$ that ensures $\mathbb{P}[\overline{A_1} \wedge \cdots \wedge \overline{A_n}] &gt; 0$, and one way to ensure this is to try to control the conditional probabilities $\mathbb{P}[A_i \mid \overline{A_1} \wedge \cdots \wedge \overline{A_{i - 1}}]$ (and if we're trying to control these conditional probabilities, we might as well try to control conditional probabilities with more general index sets). <br><br> Once we have the statement of <span class="crossref">Claim 5</span>, the rest of the proof is reasonably intuitive — we split the event we're conditioning on into a part that we know how to deal with ($B_{\text{ind}}$, which $A_i$ is independent from) and a part we don't know how to deal with ($B_{\text{dep}}$, whose interaction with $A_i$ we can't really say anything about), and get rid of the latter by dropping conditioning (which costs us a factor of $\mathbb{P}[B_{\text{dep}}]$). Then we need a lower bound on $\mathbb{P}[B_{\text{dep}}]$, and if we expand out this probability as a product of conditional probabilities, we realize that we can get a lower bound on each by using induction (each of the terms in the product is of the same form as the one we're trying to bound, but with fewer events being conditioned on). <br><br> And when we plug in that bound, we find that the condition on $\mathbb{P}[A_i]$ that we need to make the proof of the claim go through is precisely the one in <span class="crossref">Theorem 4</span>. </div> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Sanjana Das. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with the <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="external nofollow noopener">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?9b43d6e67ddc7c0855b1478ee4c48c2d" type="text/javascript"></script> <script type="text/javascript">window.MathJax={loader:{load:["[tex]/color"]},tex:{packages:["base","color","ams","amsmath"],inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0,processRefs:!0,digits:/^(?:[0-9]+(?:\{,\}[0-9]{3})*(?:\.[0-9]*)?|\.[0-9]+)/,tags:"none",tagSide:"right",tagIndent:"0.8em",useLabelIds:!0,maxMacros:1e3,maxBuffer:5120,formatError:(a,e)=>a.formatError(e)},svg:{fontCache:"global"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> <script>$(document).ready(function(){$(".sd-hidden").each(function(){console.log($(this).attr("desc"));let t=$(this).attr("desc")?$(this).attr("desc"):"Hidden";$(this).wrap("<span class='wrap-hidden'></span>"),$(this).parent().prepend(`<span class='hide-heading'>${t}</span>`),$(this).parent().find(".hide-heading").click(function(){console.log("btn2",$(this).text());let t=$(this).parent();console.log("par",t.text());let e=t.find(".sd-hidden");console.log("hidden",e.text()),e.toggle()})})});</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>